<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ city|capitalize }} Weather Details</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-4">
    <h1>Weather Details for {{ city|capitalize }}</h1>
    <h3>Current Weather</h3>
    <table class="table table-bordered">
        <tr><th>Temperature (°C)</th><td>{{ current.temp }}</td></tr>
        <tr><th>Weather</th><td>{{ current.weather_main }} - {{ current.weather_description }}</td></tr>
        <tr><th>Pressure (hPa)</th><td>{{ current.pressure }}</td></tr>
        <tr><th>Humidity (%)</th><td>{{ current.humidity }}</td></tr>
        <tr><th>Wind Speed (m/s)</th><td>{{ current.wind_speed }}</td></tr>
        <tr><th>Feels Like (°C)</th><td>{{ current.feels_like }}</td></tr>
        <tr><th>Current Local Time</th><td>{{ (current.created_at | datetimeformat(current.timezone)) }}</td></tr>
        <tr><th>Sunrise (Local Time)</th><td>{{ current.sunrise | datetimeformat(current.timezone_offset) }}</td></tr>
<tr><th>Sunset (Local Time)</th><td>{{ current.sunset | datetimeformat(current.timezone_offset) }}</td></tr>
    </table>

    <h3>Forecast</h3>
    <table class="table table-bordered table-sm">
        <thead>
            <tr>
                <th>Date/Time</th>
                <th>Temp (°C)</th>
                <th>Weather</th>
                <th>Pressure</th>
                <th>Humidity</th>
                <th>Wind Speed</th>
            </tr>
        </thead>
        <tbody>
        {% for entry in forecast %}
            <tr>
                <td>{{ entry.forecast_time | datetimeformat(entry.timezone_offset) }}</td>
                <td>{{ entry.temp }}</td>
                <td>{{ entry.weather_main }}</td>
                <td>{{ entry.pressure }}</td>
                <td>{{ entry.humidity }}</td>
                <td>{{ entry.wind_speed }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    {% if history and history|length > 0 %}
    <h3>History</h3>
    <table class="table table-bordered table-sm">
        <thead>
            <tr>
                <th>Date/Time</th>
                <th>Temp (°C)</th>
                <th>Feels Like (°C)</th>
                <th>Min (°C)</th>
                <th>Max (°C)</th>
            </tr>
        </thead>
        <tbody>
        {% for entry in history %}
            <tr>
                <td>{{ entry.created_at | datetimeformat(entry.timezone_offset) }}</td>
                <td>{{ entry.temp }}</td>
                <td>{{ entry.feels_like }}</td>
                <td>{{ entry.temp_min }}</td>
                <td>{{ entry.temp_max }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% endif %}
    <a href="{{ url_for('index') }}" class="btn btn-secondary">Back to Main</a>
</div>
</body>
</html>
